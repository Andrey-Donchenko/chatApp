{"version":3,"sources":["app.module.js","app.run.js","chatRoom/chatRoom.js","enterClick/enterClick.directive.js","config/app.routes.js","config/firebase.config.js","services/Auth.service.js","services/Chat.service.js","services/Data.service.js","signIn/signIn.js","signUp/signUp.js","chatRoom/newMessage/newMessage.js","chatRoom/signOut/signOut.js"],"names":["angular","module","run","$rootScope","$state","$on","event","toState","toParams","fromState","fromParams","error","go","component","templateUrl","controller","$scope","$interval","Auth","Chat","Data","ctrl","this","loop","scroll","document","querySelector","$onInit","data","getLastData","users","scrollDown","index","Math","round","random","length","addMessage","playSound","$onAuthStateChanged","firebaseUser","user","$onDestroy","cancel","controllerAs","enterClick","scope","element","attrs","on","which","$apply","$eval","preventDefault","directive","config","$stateProvider","$urlRouterProvider","otherwise","state","url","template","resolve","currentAuth","$waitForSignIn","$requireSignIn","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","firebase","initializeApp","$firebaseAuth","factory","$firebaseArray","$timeout","message","getMessages","$add","then","$broadcast","messagesRef","limitToLast","el","time","scrollTop","scrollHeight","filePath","audio","Audio","src","autoplay","database","ref","child","author","ServerValue","TIMESTAMP","content","check","localStorage","getItem","email","openChat","$signInWithEmailAndPassword","password","setItem","catch","checkValid","$createUserWithEmailAndPassword","console","log","confirm","bindings","sendMessage","text","signOut","$signOut"],"mappings":"cAAA,WAGCA,QACCC,OAAO,OAAQ,YAAa,gBCJ9B,WAIC,QAASC,GAAKC,EAAYC,GAEzBD,EAAWE,IAAI,oBAAqB,SAASC,EAAOC,EAASC,EAAUC,EAAWC,EAAYC,GAC5E,kBAAVA,GACJP,EAAOQ,GAAG,WAKfZ,QACKC,OAAO,OACVC,KAAK,aAAc,SAAUA,OCfhC,WAIIF,QACKC,OAAO,OACPY,UAAU,YACPC,YAAa,6BACbC,YAAa,SAAU,YAAa,OAAQ,OAAQ,OACnD,SAAUC,EAAQC,EAAWC,EAAMC,EAAMC,GAC3C,GAAMC,GAAOC,KAGTC,MAAAA,EACJF,GAAKG,OAASC,SAASC,cAAc,SAErCL,EAAKM,QAAU,WACXN,EAAKO,KAAOT,EAAKU,cACjBR,EAAKS,MAAQV,EACbD,EAAKY,WAAWV,EAAKG,OAAQ,MAC7BD,EAAON,EAAU,WACzB,GAAIe,GAAQC,KAAKC,MAAMD,KAAKE,UAAYd,EAAKS,MAAMM,OAAS,GAC5CjB,GAAKkB,WAAWhB,EAAKS,MAAME,IAC3Bb,EAAKmB,UAXA,oBAYN,MAGdtB,EAAOX,IAAI,eAAgB,WACjBc,EAAKY,WAAWV,EAAKG,OAAQ,OAGpCN,EAAKqB,oBAAoB,SAAAC,GAClBA,IACCnB,EAAKoB,KAAOD,KAI1BnB,EAAKqB,WAAa,WACZzB,EAAU0B,OAAOpB,MAIhBqB,aAAc,oBC1C1B,WAII,QAASC,KACR,MAAO,UAAUC,EAAOC,EAASC,GAChCD,EAAQE,GAAG,mBAAoB,SAAS3C,GAChB,KAAhBA,EAAM4C,QACNJ,EAAMK,OAAO,WACTL,EAAMM,MAAMJ,EAAMH,cAE/BvC,EAAM+C,qBAMPrD,QACEC,OAAO,OACPqD,UAAU,aAAcT,MCnB9B,WAII,QAASU,GAAQC,EAAgBC,GAE7BA,EAAmBC,UAAU,UAEnCF,EACKG,MAAM,SACNC,IAAK,SACLC,SAAU,sBACVC,SACOC,aAAgB,OAAQ,SAAS7C,GACnC,MAAOA,GAAK8C,sBAIXL,MAAM,YACHC,IAAK,YACLC,SAAU,sBACVC,SACIC,aAAgB,OAAQ,SAAS7C,GAC7B,MAAOA,GAAK8C,sBAIhCL,MAAM,QACHC,IAAK,QACLC,SAAU,0BACbC,SACUC,aAAgB,OAAQ,SAAS7C,GACnC,MAAOA,GAAK+C,sBAMvBjE,QACQC,OAAO,OACPsD,QACG,iBACA,qBACAA,OC3CZ,WAGC,GAAMA,IACLW,OAAQ,0CACLC,WAAY,gCACZC,YAAa,uCACbC,UAAW,gBACXC,cAAe,4BACfC,kBAAmB,eAEvBC,UAASC,cAAclB,MCXxB,WAIC,QAASrC,GAAMwD,GACd,MAAOA,KAGR1E,QACEC,OAAO,OACP0E,QAAQ,QAAS,gBAAiBzD,OCVrC,WAIC,QAASC,GAAMhB,EAAYyE,EAAgBC,GAWzC,QAASxC,GAAWyC,GACnBH,EAAQI,cAAcC,KAAKF,GACzBG,KAAK,WACL9E,EAAW+E,WAAW,kBAGzB,QAASH,KACP,MAAOH,GAAeO,GAExB,QAAStD,KACP,MAAO+C,GAAeO,EAAYC,YAAY,KAEhD,QAASrD,GAAWsD,EAAIC,GACfT,EAAS,WACLQ,EAAGE,UAAYF,EAAGG,cACnBF,GAEP,QAAShD,GAAUmD,GACxB,GAAIC,GAAQ,GAAIC,MAChBD,GAAME,IAAMH,EACTC,EAAMG,UAAW,EA9BpB,GAAMV,GAAcX,SAASsB,WAAWC,MAAMC,MAAM,YAC9CrB,GACLtC,WAAYA,EACZ0C,YAAaA,EACblD,YAAaA,EACbE,WAAYA,EACZO,UAAWA,EAEZ,OAAOqC,GA0BT3E,QACEC,OAAO,OACP0E,QAAQ,QACR,aACA,iBACA,WACAxD,OC7CH,WAIC,QAASC,KA4DR,QAxDE6E,OAAQ,OACRX,KAAMd,SAASsB,SAASI,YAAYC,UACpCC,QAAS,+BAGTH,OAAQ,OACRX,KAAMd,SAASsB,SAASI,YAAYC,UACpCC,QAAS,4BAGTH,OAAQ,QACRX,KAAMd,SAASsB,SAASI,YAAYC,UACpCC,QAAS,qBAGTH,OAAQ,OACRX,KAAMd,SAASsB,SAASI,YAAYC,UACpCC,QAAS,iCAGTH,OAAQ,OACRX,KAAMd,SAASsB,SAASI,YAAYC,UACpCC,QAAS,+BAGTH,OAAQ,OACRX,KAAMd,SAASsB,SAASI,YAAYC,UACpCC,QAAS,wCAGTH,OAAQ,QACRX,KAAMd,SAASsB,SAASI,YAAYC,UACpCC,QAAS,+CAGTH,OAAQ,OACRX,KAAMd,SAASsB,SAASI,YAAYC,UACpCC,QAAS,qCAGTH,OAAQ,OACRX,KAAMd,SAASsB,SAASI,YAAYC,UACpCC,QAAS,gCAGTH,OAAQ,OACRX,KAAMd,SAASsB,SAASI,YAAYC,UACpCC,QAAS,8BAGTH,OAAQ,OACRX,KAAMd,SAASsB,SAASI,YAAYC,UACpCC,QAAS,mCAOVpG,QACAC,OAAO,OACP0E,QAAQ,OAAQvD,MCrEnB,WAIIpB,QACKC,OAAO,OACPY,UAAU,UACPC,YAAa,yBACbC,YAAa,SAAU,OAAQ,SAAUX,EAAQc,GACnD,GAAMG,GAAOC,IAEbD,GAAKM,QAAU,WACX,GAAI0E,GAAQC,aAAaC,QAAQ,WAC7BF,KACAhF,EAAKmF,MAAQH,IAGrBhF,EAAKoF,SAAW,WACZvF,EAAKwF,4BAA4BrF,EAAKmF,MAAOnF,EAAKsF,UACjD1B,KAAK,SAAAzC,GACF8D,aAAaM,QAAQ,WAAYpE,EAAagE,OAC9CpG,EAAOQ,GAAG,UACXiG,MAAM,SAAAlG,GACLU,EAAKV,MAAQA,EAAMmE,aAIzBlC,aAAc,kBC3B1B,WAII5C,QACKC,OAAO,OACPY,UAAU,UACPC,YAAa,yBACbC,YAAa,SAAU,OAAQ,SAAUX,EAAQc,GAMnD,QAASuF,KACJK,KAGD5F,EAAK6F,gCAAgC1F,EAAKmF,MAAOnF,EAAKsF,UACrD1B,KAAK,SAAAzC,GACF8D,aAAaM,QAAQ,WAAYpE,EAAagE,OAC9CpG,EAAOQ,GAAG,UACXiG,MAAM,SAAAlG,GACRqG,QAAQC,IAAItG,GACTU,EAAKV,MAAQA,EAAMmE,UAI3B,QAASgC,KACF,MAAQzF,GAAKsF,WAAatF,EAAK6F,QApBtC,GAAM7F,GAAOC,IAEbD,GAAKoF,SAAWA,EAChBpF,EAAKyF,WAAaA,IAoBhBlE,aAAc,kBChC1B,WAII5C,QACKC,OAAO,OACPY,UAAU,cACPC,YAAa,0CAChBqG,UACC1E,KAAM,IACNjB,OAAQ,KAENT,YAAa,OAAQ,SAASI,GAC7B,GAAME,GAAOC,IAIbD,GAAK+F,YAAc,WAClB,GAAI/F,EAAKgG,KAAT,CAGA,GAAIvC,IACAmB,OAAQ5E,EAAKoB,KAAK+D,MAClBlB,KAAMd,SAASsB,SAASI,YAAYC,UACpCC,QAAS/E,EAAKgG,KAElBlG,GAAKkB,WAAWyC,GAChB3D,EAAKY,WAAWV,EAAKG,OAAQ,KAC7BL,EAAKmB,UAbW,oBAchBjB,EAAKgG,KAAO,OAKdzE,aAAc,sBClC1B,WAII5C,QACKC,OAAO,OACPY,UAAU,WACPC,YAAa,oCACbC,YAAa,SAAU,OAAQ,SAASX,EAAQc,GAC/CI,KAAKgG,QAAU,WACdpG,EAAKqG,WACLnH,EAAOQ,GAAG,YAGZgC,aAAc","file":"all.min.js","sourcesContent":["(function() {\n    'use strict';\n\n\tangular\n\t.module('app', ['ui.router', 'firebase']);\n})();","(function() {\r\n\t\r\n    'use strict';\r\n\r\n\tfunction run ($rootScope, $state) {\r\n\t\t\r\n\t\t$rootScope.$on(\"$stateChangeError\", function(event, toState, toParams, fromState, fromParams, error) {\r\n\t\t    if (error === \"AUTH_REQUIRED\") {\r\n\t  \t\t\t$state.go(\"login\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tangular\r\n    \t.module(\"app\")\r\n\t\t.run([\"$rootScope\", \"$state\", run]);\r\n})();","(function() {\n\n    'use strict';\n    \n    angular\n        .module(\"app\")\n        .component(\"chatRoom\", {\n            templateUrl: 'app/chatRoom/chatRoom.html',\n            controller: ['$scope', '$interval', 'Auth', 'Chat', 'Data',\n            \tfunction ($scope, $interval, Auth, Chat, Data) {\n\t\t\t        const ctrl = this;\n\n\t\t\t        const filePath = 'files/input.mp3';\n\t\t\t        let loop;\n\t\t\t        ctrl.scroll = document.querySelector('.chat');\n\n\t\t\t        ctrl.$onInit = () => {\n\t\t\t            ctrl.data = Chat.getLastData();\n\t\t\t            ctrl.users = Data;\n\t\t\t            Chat.scrollDown(ctrl.scroll, 1500);\n\t\t\t            loop = $interval(() => {\n\t\t\t\t\t\t\tlet index = Math.round(Math.random() * (ctrl.users.length - 1));\n\t\t\t                    Chat.addMessage(ctrl.users[index]);\n\t\t\t                    Chat.playSound(filePath);\n\t\t\t                }, 7000);\n\t\t\t        };\n\n\t\t\t    \t$scope.$on(\"messageEvent\", () => {\n\t\t                Chat.scrollDown(ctrl.scroll, 100);\n\t\t            });\n\n\t\t\t        Auth.$onAuthStateChanged(firebaseUser => {\n\t\t\t            if(firebaseUser) {\n\t\t\t                ctrl.user = firebaseUser;\n\t\t\t            }\n\t\t\t\t\t});\n\n\t\t\t\t\tctrl.$onDestroy = () => {\n      \t\t\t\t\t$interval.cancel(loop);\n    \t\t\t\t};\n\t\t\t\t}\n\t\t\t],\n            controllerAs: 'chatRoomCtrl'\n        });\n})();","(function() {\n\t\n    'use strict';\n\n    function enterClick() {\n    \treturn function (scope, element, attrs) {\n\t\t    element.on(\"keydown keypress\", function(event) {\n\t\t        if (event.which === 13) {\n\t\t            scope.$apply(function() {\n\t\t                scope.$eval(attrs.enterClick);\n\t\t            });\n\t\t\t\t\tevent.preventDefault();\n\t\t        }\n\t\t    });\n\t\t};\n    }\n\n    angular\n\t    .module(\"app\")\n\t    .directive(\"enterClick\", enterClick);\n})();","(function() {\n\n    'use strict';\n   \n    function config ($stateProvider, $urlRouterProvider) {\n        \n        $urlRouterProvider.otherwise('/login');\n        \n\t\t$stateProvider\n    \t\t.state(\"login\", {\n\t\t    \turl: '/login',\n\t\t    \ttemplate: '<sign-in></sign-in>',\n\t\t    \tresolve: {\n    \t\t        \"currentAuth\": [\"Auth\", function(Auth) {\n\t\t\t\t        return Auth.$waitForSignIn();\n    \t\t\t\t}]\n    \t\t\t}\n    \t\t})\n            .state(\"register\", {\n                url: '/register',\n                template: '<sign-up></sign-up>',\n                resolve: {\n                    \"currentAuth\": [\"Auth\", function(Auth) {\n                        return Auth.$waitForSignIn();\n                    }]\n                }\n            })\n\t\t\t.state(\"chat\", {\n\t\t\t    url: '/chat',\n\t\t\t    template: '<chat-room></chat-room>',\n\t\t\t\tresolve: {\n    \t\t        \"currentAuth\": [\"Auth\", function(Auth) {\n\t\t\t\t        return Auth.$requireSignIn();\n    \t\t\t\t}]\n    \t\t\t}\n    \t\t});\n\t}\n\n\tangular\n        .module('app')\n        .config([\n            '$stateProvider',\n            '$urlRouterProvider',\n            config\n        ]);\n})();\n","(function() {\n    'use strict';\n\n\tconst config = {\n\t\tapiKey: \"AIzaSyBIgWMrMIlHWrf3-XQvGhLFPFctzMUyDsg\",\n\t    authDomain: \"chatapp-9640a.firebaseapp.com\",\n\t    databaseURL: \"https://chatapp-9640a.firebaseio.com\",\n\t    projectId: \"chatapp-9640a\",\n\t    storageBucket: \"chatapp-9640a.appspot.com\",\n\t    messagingSenderId: \"508009841221\"\n\t};\n\tfirebase.initializeApp(config);\n})();\n\n","(function() {\n\n    'use strict';\n\n\tfunction Auth ($firebaseAuth) {\n\t\treturn $firebaseAuth();\n\t}\n\t\n\tangular\n\t\t.module(\"app\")\n\t\t.factory(\"Auth\", [\"$firebaseAuth\", Auth]);\n})();","(function() {\n\n    'use strict';\n\n\tfunction Chat ($rootScope, $firebaseArray, $timeout) {\n\t \tconst messagesRef = firebase.database().ref().child(\"messages\");\n\t \tconst factory = {\n\t \t\taddMessage: addMessage,\n\t \t\tgetMessages: getMessages,\n\t \t\tgetLastData: getLastData,\n\t \t\tscrollDown: scrollDown,\n\t \t\tplaySound: playSound\n\t \t};\n\t \treturn factory;\n\n\t \tfunction addMessage(message) {\n\t \t\tfactory.getMessages().$add(message)\n\t \t\t\t.then(() => {\n\t \t\t\t\t$rootScope.$broadcast(\"messageEvent\");\n\t \t\t\t});\n\t \t}\n\t \tfunction getMessages() {\n\t  \t\treturn $firebaseArray(messagesRef);\n\t \t}\n\t \tfunction getLastData() {\n\t  \t\treturn $firebaseArray(messagesRef.limitToLast(30));\n\t \t}\n\t \tfunction scrollDown(el, time) {\n            $timeout(() => {\n                el.scrollTop = el.scrollHeight;\n            }, time)\n        }\n        function playSound(filePath) {\n\t\t\tlet audio = new Audio();\n\t\t\taudio.src = filePath;\n\t\t    audio.autoplay = true;\n\t\t}\n    }\n\t   \t\n\tangular\n\t\t.module('app')\n\t\t.factory('Chat', [\n\t\t\t'$rootScope',\n\t\t\t'$firebaseArray',\n\t\t\t'$timeout',\n\t\t\tChat]);\n})();","(function() {\r\n\r\n    'use strict';\r\n\r\n\tfunction Data() {\r\n\r\n\t\tconst data = [\r\n\t\t\t{\r\n\t\t\t\tauthor: 'Kent',\r\n\t\t\t\ttime: firebase.database.ServerValue.TIMESTAMP,\r\n\t\t\t\tcontent: 'Lorem ipsum dolor sit amet'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tauthor: 'John',\r\n\t\t\t\ttime: firebase.database.ServerValue.TIMESTAMP,\r\n\t\t\t\tcontent: 'suscipit exercitationem'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tauthor: 'Sandy',\r\n\t\t\t\ttime: firebase.database.ServerValue.TIMESTAMP,\r\n\t\t\t\tcontent: 'tenetur expedita'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tauthor: 'Lisa',\r\n\t\t\t\ttime: firebase.database.ServerValue.TIMESTAMP,\r\n\t\t\t\tcontent: 'consectetur adipisicing elit'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tauthor: 'Kent',\r\n\t\t\t\ttime: firebase.database.ServerValue.TIMESTAMP,\r\n\t\t\t\tcontent: 'Lorem ipsum dolor sit amet'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tauthor: 'Kent',\r\n\t\t\t\ttime: firebase.database.ServerValue.TIMESTAMP,\r\n\t\t\t\tcontent: 'Fuga, consectetur corporis deleniti'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tauthor: 'Peter',\r\n\t\t\t\ttime: firebase.database.ServerValue.TIMESTAMP,\r\n\t\t\t\tcontent: 'obcaecati deleniti placeat eius temporibus'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tauthor: 'Mike',\r\n\t\t\t\ttime: firebase.database.ServerValue.TIMESTAMP,\r\n\t\t\t\tcontent: 'amet quisquam asperiores officia'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tauthor: 'Lisa',\r\n\t\t\t\ttime: firebase.database.ServerValue.TIMESTAMP,\r\n\t\t\t\tcontent: 'aliquam eius exercitationem'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tauthor: 'Mike',\r\n\t\t\t\ttime: firebase.database.ServerValue.TIMESTAMP,\r\n\t\t\t\tcontent: 'repudiandae deserunt vero'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tauthor: 'Kent',\r\n\t\t\t\ttime: firebase.database.ServerValue.TIMESTAMP,\r\n\t\t\t\tcontent: 'molestiae quaerat aut vel iste'\r\n\t\t\t},\r\n\t\t];\r\n\r\n\t\treturn data;\r\n\t}\r\n\t    \t\r\n  \tangular\r\n\t\t.module(\"app\")\r\n\t\t.factory(\"Data\", Data);\r\n})();","(function() {\n    \n    'use strict';\n\n    angular\n        .module('app')\n        .component('signIn', {\n            templateUrl: 'app/signIn/signIn.html',\n            controller: ['$state', 'Auth', function ($state, Auth) {\n\t\t        const ctrl = this;\n\n\t\t        ctrl.$onInit = () => {\n\t\t            let check = localStorage.getItem('chatName');\n\t\t            if (check) {\n\t\t                ctrl.email = check;\n\t\t            }\n\t\t        };\n\t\t        ctrl.openChat = () => {\n\t\t            Auth.$signInWithEmailAndPassword(ctrl.email, ctrl.password)\n\t\t            .then(firebaseUser => {\n\t\t                localStorage.setItem('chatName', firebaseUser.email);\n\t\t                $state.go(\"chat\");\n\t\t            }).catch(error => {\n\t\t                ctrl.error = error.message;\n\t\t            });\n\t\t        };\n    \t\t}],\n            controllerAs: 'signInCtrl'\n        });\n})();","(function() {\n    \n    'use strict';\n\n    angular\n        .module('app')\n        .component('signUp', {\n            templateUrl: 'app/signUp/signUp.html',\n            controller: ['$state', 'Auth', function ($state, Auth) {\n\t\t        const ctrl = this;\n\n\t\t        ctrl.openChat = openChat;\n\t\t        ctrl.checkValid = checkValid;\n\n\t\t        function openChat() {\n\t\t        \tif (checkValid()) {\n\t\t        \t\treturn;\n\t\t        \t}\n\t\t            Auth.$createUserWithEmailAndPassword(ctrl.email, ctrl.password)\n\t\t            .then(firebaseUser => {\n\t\t                localStorage.setItem('chatName', firebaseUser.email);\n\t\t                $state.go(\"chat\");\n\t\t            }).catch(error => {\n\t\t            \tconsole.log(error)\n\t\t                ctrl.error = error.message;\n\t\t            });\n\t\t        }\n\n\t\t        function checkValid() {\n                \treturn (ctrl.password !== ctrl.confirm)\n\t\t\t\t}\n    \t\t}],\n            controllerAs: 'signUpCtrl'\n        });\n})();","(function() {\n\n    'use strict';\n\n    angular\n        .module(\"app\")\n        .component(\"newMessage\", {\n            templateUrl: 'app/chatRoom/newMessage/newMessage.html',\n        \tbindings: {\n        \t\tuser: '<',\n        \t\tscroll: '<'\n        \t},\n            controller: ['Chat', function(Chat) {\n            \tconst ctrl = this;\n\n            \tconst filePath = 'files/output.mp3';\n\n            \tctrl.sendMessage = () => {\n\t\t            if(!ctrl.text) {\n\t\t                return;\n\t\t            }\n\t\t            let message = {\n\t\t                author: ctrl.user.email,\n\t\t                time: firebase.database.ServerValue.TIMESTAMP,\n\t\t                content: ctrl.text\n\t\t            };\n\t\t            Chat.addMessage(message);\n\t\t            Chat.scrollDown(ctrl.scroll, 100);\n\t\t            Chat.playSound(filePath);\n\t\t            ctrl.text = '';\n\t\t        };\n\n\t\t        \n\t\t\t}],\n            controllerAs: 'newMessageCtrl'\n        });\n})();","(function() {\n\n    'use strict';\n\n    angular\n        .module(\"app\")\n        .component(\"signOut\", {\n            templateUrl: 'app/chatRoom/signOut/signOut.html',\n            controller: ['$state', 'Auth', function($state, Auth) {\n            \tthis.signOut = () => {\n\t\t            Auth.$signOut();\n\t\t            $state.go(\"login\");\n\t\t        };\n            }],\n            controllerAs: 'signOutCtrl'\n        });\n})();"]}
"use strict";!function(){angular.module("app",["ui.router","firebase"])}(),function(){function e(e,t){e.$on("$stateChangeError",function(e,a,n,o,r,i){"AUTH_REQUIRED"===i&&t.go("login")})}angular.module("app").run(["$rootScope","$state",e])}(),function(){angular.module("app").component("chatRoom",{templateUrl:"app/chatRoom/chatRoom.html",controller:["$scope","$interval","Auth","Chat","Data",function(e,t,a,n,o){var r=this,i=void 0;r.scroll=document.querySelector(".chat"),r.$onInit=function(){r.data=n.getLastData(),r.users=o,n.scrollDown(r.scroll,1500),i=t(function(){var e=Math.round(Math.random()*(r.users.length-1));n.addMessage(r.users[e]),n.playSound("files/input.mp3")},7e3)},e.$on("messageEvent",function(){n.scrollDown(r.scroll,100)}),a.$onAuthStateChanged(function(e){e&&(r.user=e)}),r.$onDestroy=function(){t.cancel(i)}}],controllerAs:"chatRoomCtrl"})}(),function(){function e(){return function(e,t,a){t.on("keydown keypress",function(t){13===t.which&&(e.$apply(function(){e.$eval(a.enterClick)}),t.preventDefault())})}}angular.module("app").directive("enterClick",e)}(),function(){function e(e,t){t.otherwise("/login"),e.state("login",{url:"/login",template:"<sign-in></sign-in>",resolve:{currentAuth:["Auth",function(e){return e.$waitForSignIn()}]}}).state("register",{url:"/register",template:"<sign-up></sign-up>",resolve:{currentAuth:["Auth",function(e){return e.$waitForSignIn()}]}}).state("chat",{url:"/chat",template:"<chat-room></chat-room>",resolve:{currentAuth:["Auth",function(e){return e.$requireSignIn()}]}})}angular.module("app").config(["$stateProvider","$urlRouterProvider",e])}(),function(){var e={apiKey:"AIzaSyBIgWMrMIlHWrf3-XQvGhLFPFctzMUyDsg",authDomain:"chatapp-9640a.firebaseapp.com",databaseURL:"https://chatapp-9640a.firebaseio.com",projectId:"chatapp-9640a",storageBucket:"chatapp-9640a.appspot.com",messagingSenderId:"508009841221"};firebase.initializeApp(e)}(),function(){function e(e){return e()}angular.module("app").factory("Auth",["$firebaseAuth",e])}(),function(){function e(e,t,a){function n(t){c.getMessages().$add(t).then(function(){e.$broadcast("messageEvent")})}function o(){return t(u)}function r(){return t(u.limitToLast(30))}function i(e,t){a(function(){e.scrollTop=e.scrollHeight},t)}function s(e){var t=new Audio;t.src=e,t.autoplay=!0}var u=firebase.database().ref().child("messages"),c={addMessage:n,getMessages:o,getLastData:r,scrollDown:i,playSound:s};return c}angular.module("app").factory("Chat",["$rootScope","$firebaseArray","$timeout",e])}(),function(){function e(){return[{author:"Kent",time:firebase.database.ServerValue.TIMESTAMP,content:"Lorem ipsum dolor sit amet"},{author:"John",time:firebase.database.ServerValue.TIMESTAMP,content:"suscipit exercitationem"},{author:"Sandy",time:firebase.database.ServerValue.TIMESTAMP,content:"tenetur expedita"},{author:"Lisa",time:firebase.database.ServerValue.TIMESTAMP,content:"consectetur adipisicing elit"},{author:"Kent",time:firebase.database.ServerValue.TIMESTAMP,content:"Lorem ipsum dolor sit amet"},{author:"Kent",time:firebase.database.ServerValue.TIMESTAMP,content:"Fuga, consectetur corporis deleniti"},{author:"Peter",time:firebase.database.ServerValue.TIMESTAMP,content:"obcaecati deleniti placeat eius temporibus"},{author:"Mike",time:firebase.database.ServerValue.TIMESTAMP,content:"amet quisquam asperiores officia"},{author:"Lisa",time:firebase.database.ServerValue.TIMESTAMP,content:"aliquam eius exercitationem"},{author:"Mike",time:firebase.database.ServerValue.TIMESTAMP,content:"repudiandae deserunt vero"},{author:"Kent",time:firebase.database.ServerValue.TIMESTAMP,content:"molestiae quaerat aut vel iste"}]}angular.module("app").factory("Data",e)}(),function(){angular.module("app").component("signIn",{templateUrl:"app/signIn/signIn.html",controller:["$state","Auth",function(e,t){var a=this;a.$onInit=function(){var e=localStorage.getItem("chatName");e&&(a.email=e)},a.openChat=function(){t.$signInWithEmailAndPassword(a.email,a.password).then(function(t){localStorage.setItem("chatName",t.email),e.go("chat")}).catch(function(e){a.error=e.message})}}],controllerAs:"signInCtrl"})}(),function(){angular.module("app").component("signUp",{templateUrl:"app/signUp/signUp.html",controller:["$state","Auth",function(e,t){function a(){n()||t.$createUserWithEmailAndPassword(o.email,o.password).then(function(t){localStorage.setItem("chatName",t.email),e.go("chat")}).catch(function(e){console.log(e),o.error=e.message})}function n(){return o.password!==o.confirm}var o=this;o.openChat=a,o.checkValid=n}],controllerAs:"signUpCtrl"})}(),function(){angular.module("app").component("newMessage",{templateUrl:"app/chatRoom/newMessage/newMessage.html",bindings:{user:"<",scroll:"<"},controller:["Chat",function(e){var t=this;t.sendMessage=function(){if(t.text){var a={author:t.user.email,time:firebase.database.ServerValue.TIMESTAMP,content:t.text};e.addMessage(a),e.scrollDown(t.scroll,100),e.playSound("files/output.mp3"),t.text=""}}}],controllerAs:"newMessageCtrl"})}(),function(){angular.module("app").component("signOut",{templateUrl:"app/chatRoom/signOut/signOut.html",controller:["$state","Auth",function(e,t){this.signOut=function(){t.$signOut(),e.go("login")}}],controllerAs:"signOutCtrl"})}();
//# sourceMappingURL=all.min.js.map
